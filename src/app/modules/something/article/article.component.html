<app-header [title]="article.title" [is_article]="true"></app-header>
<div class="container">
  <div  style="display: flex;flex-direction:column;align-items:stretch">
    <mat-card class="card-container">
      <!--head of article-->
      <mat-card-header>
        <mat-card-subtitle>{{article.author}} Published on {{article.time}}
          <ng-container *ngIf="article.update_time">Update on {{article.update_time}}</ng-container>
        </mat-card-subtitle>
      </mat-card-header>

      <hr><app-editor [(quill)]="quill" (onQuillInit)="onQuillInit()" [readonly]="true"></app-editor><hr>
      <!--<div *appProgress="article"></div>-->
      <mat-chip-list>
        <mat-chip *ngFor="let c of article.category">{{c}}</mat-chip>
      </mat-chip-list>
    </mat-card>

    <mat-card *ngFor="let c of comments" class="card-container">
      <mat-card-header>
        <mat-card-title><h3>{{c.author}}</h3></mat-card-title>
        <mat-card-subtitle>{{c.time}}</mat-card-subtitle>
      </mat-card-header>
      <mat-card-content>
        <p>{{c.content}}</p>
      </mat-card-content>
      <mat-card-actions>
        <button mat-icon-button color="primary" (click)="likeComment(c)">
          <mat-icon aria-label="Example icon-button with a heart icon">favorite</mat-icon>
          {{c.likes}}
        </button>
      </mat-card-actions>
    </mat-card>

    <mat-card class="card-container">
      <mat-card-header>
        <mat-card-title><h3>Leave a comment</h3></mat-card-title>
      </mat-card-header>
      <form #form="ngForm" (submit)="onSubmit()">
        <mat-card-header>
          <mat-card-title><h3></h3></mat-card-title>
          <mat-card-subtitle></mat-card-subtitle>
        </mat-card-header>
        <mat-card-content>
          <mat-form-field style="width: 100%;">
          <textarea matInput placeholder="say something" [(ngModel)]="newComment.content" name="content"
                    autocomplete="off" required style="height: 100px;"></textarea>
          </mat-form-field>
          <mat-form-field>
            <input matInput placeholder="author" [(ngModel)]="newComment.author" name="author" autocomplete="off">
          </mat-form-field>
        </mat-card-content>
        <mat-card-actions>
          <div fxFlex="row" fxLayoutAlign="end center">
            <button mat-button type="submit" color="primary" [disabled]="!form.valid">提交</button>
          </div>
        </mat-card-actions>
      </form>
    </mat-card>
  </div>
</div>
